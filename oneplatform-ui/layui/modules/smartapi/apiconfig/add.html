<!DOCTYPE html>
<html>
 <head> 
  <meta charset="UTF-8" /> 
  <title>新增接口</title> 
  <link rel="stylesheet" href="../../../assets/js/layui/css/layui.css" media="all" />
  <link rel="stylesheet" href="../../../assets/css/global.css" media="all">
  <link rel="stylesheet" href="../../../assets/js/font-awesome/css/font-awesome.min.css">
 </head> 
 <body> 
  <div class="admin-main">  
  <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
     <legend>接口基本信息配置</legend>
  </fieldset>
  <form class="layui-form" action="/api/account/add">  
    <div class="layui-form-item">
		<label class="layui-form-label">接口名称</label>
		<div class="layui-input-block">
		   <input type="text" name="name" placeholder="接口名称" lay-verify="required" class="layui-input">
		</div>
	</div> 
	<div class="layui-form-item">
		<label class="layui-form-label">请求方法</label>
		<div class="layui-input-block">
		    <select name="httpType" lay-filter="httpType">
        <option value="POST">POST</option>
        <option value="GET">GET</option>
      </select>
		</div>
	</div>
    <div class="layui-form-item">
		<label class="layui-form-label">请求路径</label>
		<div class="layui-input-block">
		   <input type="text" name="uri" placeholder="接口地址,如:/user/add" class="layui-input">
		</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">关联数据源</label>
		<div class="layui-input-block">
		    <select id="moduleId" name="datasourceId" lay-verify="required" asnycSelect="/api/dsconfig/options" lay-filter="datasource">
           <option value="">请选择数据源</option> 
         </select>
		</div>
	</div>	
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
       <legend>接口操作配置</legend>
    </fieldset>
   <div id="action_config_line" class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">添加操作</label>
      <div class="layui-input-inline" style="width: 200px;">
      <input type="text" name="username" placeholder="操作名称,可不填" lay-verify="required" class="layui-input">
      </div>
    </div>
    <div class="layui-inline">
      <div class="layui-input-inline" style="width: 135px;">
        <select lay-filter="dbaction">
        <option value="">选择操作类型</option>
        <option value="insert">INSERT</option>
        <option value="update">UPDAE</option>
        <option value="delete">DELETE</option>
        <option value="select">SELECT</option>
      </select>
      </div>
    </div>
    <div class="layui-inline">
      <div class="layui-input-inline" style="width: 135px;">
        <select id="table_select" lay-filter="table">
        <option value="">选择表</option>
      </select>
      </div>
    </div>
    <div class="layui-inline" show-on="select" style="display: none;">
      <div class="layui-input-inline" style="width: 100px;">
        <input type="button" class="layui-btn" action="selectConfig" value="配置查询字段"/>
      </div>
    </div>
    <div class="layui-inline" show-on="insert" style="display: none;">
      <div class="layui-input-inline" style="width: 100px;">
        <input type="button" class="layui-btn" action="insertConfig" value="配置插入字段"/>
      </div>
    </div>
    <div class="layui-inline" show-on="update" style="display: none;">
      <div class="layui-input-inline" style="width: 100px;">
        <input type="button" class="layui-btn" action="updateConfig" value="配置更新字段"/>
      </div>
    </div>
    <div class="layui-inline" show-on="select|update|delete" style="display: none;">
      <div class="layui-input-inline" style="width: 80px;">
        <input type="button" class="layui-btn" action="whereConfig" value="配置条件"/>
      </div>
    </div>
    <div class="layui-inline" show-on="select" style="display: none;">
      <div class="layui-input-inline" style="width: 100px;">
        <input type="button" class="layui-btn" value="配置结果规则"/>
      </div>
    </div>
    
    <table class="layui-table" lay-size="sm" style="margin-left: 110px;width: 92%;">
  <thead>
    <tr>
      <th width="100">步骤名</th>
      <th>动作内容</th>
      <th width="150">操作</th>
    </tr> 
  </thead>
  <tbody>
    <tr>
      <td>贤心</td>
      <td>2016-11-29</td>
      <td>人生行</td>
    </tr>
    <tr>
      <td>许闲心</td>
      <td>2016-11-28</td>
      <td></td>
    </tr>
    <tr>
      <td>sentsin</td>
      <td>2016-11-27</td>
      <td> </td>
    </tr>
  </tbody>
</table>
  </div>     
    <div class="layui-form-item"> 
     <div class="layui-input-block"> 
        <input type="button"  class="layui-btn J_ajaxSubmit" value="保存"/>
        <input type="reset" class="layui-btn layui-btn-primary" value="重置"/>
     </div> 
    </div> 
   </form> 
  </div> 
  
  <div id="configdialog" style="display:none;">
  <form id="configForm" class="layui-form" action="" style="padding: 20px;" lay-filter="configForm"></form>
  </div>
 </body>
 <script type="text/javascript" src="/assets/js/layui/layui.js"></script>
 
 <script id="configDialogTpl" type="text/html">
     {{#  layui.each(d.columns, function(index, item){ }}
     <div class="layui-form-item">
    <div class="layui-inline">
      <div class="layui-input-inline" style="width: 150px;">
        <input type="checkbox" name="like1[read]" lay-skin="primary" title="{{ item.name }}">
      </div>
      <div class="layui-form-mid" style="width: 80px;" show-on="insertConfig|updateConfig">=</div>
      <div class="layui-input-inline" show-on="whereConfig" style="width: 80px;">
        <select id="compareSymbol">
        <option value="=">等于</option>
        <option value="<>">不等于</option>
        <option value=">">大于</option>
        <option value="<">小于</option>
        <option value=">=">大于等于</option>
        <option value="<=">小于等于</option>
      </select>
      </div>
      <div class="layui-input-inline" show-on="insertConfig|whereConfig|updateConfig" style="width: 120px;">
        <input type="text" value="{{ item.variableExpr }}" class="layui-input">
      </div>
      <div class="layui-input-inline" show-on="updateConfig|whereConfig" style="width: 80px;">
        <input type="checkbox" lay-skin="primary" title="必填">
      </div>
    </div>
  </div>
     {{#  }); }}
  </script>
  
<script>
	var tables = {};
	layui.config({
		version : "1.0.0",
		base : '/assets/js/modules/'
	}).use('smartapi');
</script>
</html>